<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Welcome!{% endblock %}</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">

    {% block stylesheets %}
        {{ encore_entry_link_tags('app') }}

        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    {% endblock %}

    {% block javascripts %}{% endblock %}
</head>
<body class="font-['Inter',_system-ui,_-apple-system,_BlinkMacSystemFont,_'Segoe_UI',_Roboto,_sans-serif] bg-white text-gray-900 min-h-screen overflow-x-hidden">

    <!-- Sidebar -->
    <div class="sidebar w-64 bg-gray-900 text-white flex flex-col fixed top-0 left-0 h-screen z-50 shadow-lg">
        <div class="flex justify-center mb-4 pt-6">
            <img src="{{ asset('images/cd_logo.png') }}" alt="Campana Designs Logo" class="h-10 transition-all duration-300 hover:filter hover:brightness-0 hover:invert hover:drop-shadow-[0_0_12px_rgba(147,112,219,0.6)] hover:scale-105">
        </div>

        <h2 class="text-2xl font-bold text-center mb-8 text-white tracking-tight">Admin Panel</h2>

        <nav class="flex-1 px-2 space-y-1">
            {% set navItems = [
                { path: 'app_services_index', label: 'Services' },
                { path: 'app_order_index', label: 'Orders' },
                { path: 'app_user_index', label: 'Clients' },
                { path: 'app_analytics_index', label: 'Analytics' },
                { path: 'app_reports_index', label: 'Reports' },
                { path: 'app_settings_index', label: 'Settings' }
            ] %}

            {% for item in navItems %}
                <a href="{{ path(item.path) }}"
                   class="group flex items-center px-6 py-3 text-sm font-medium text-gray-300 hover:text-white hover:bg-indigo-600/10 transition-colors duration-200 relative
                   {{ app.request.attributes.get('_route') starts with item.path|replace({ (item.path|split('_')|first): '' })|trim('_') ? 'text-white bg-indigo-600/10' : '' }}">
                    <span class="absolute left-0 h-3/5 w-1 bg-indigo-600 rounded-r {{ app.request.attributes.get('_route') starts with item.path|replace({ (item.path|split('_')|first): '' })|trim('_') ? 'opacity-100' : 'opacity-0 group-hover:opacity-100' }} transition-opacity"></span>
                    <span class="ml-3">{{ item.label }}</span>
                </a>
            {% endfor %}
        </nav>
    </div>

    <!-- Top Navbar -->
    <nav class="fixed left-64 right-0 top-0 h-15 bg-white shadow-sm border-b border-gray-100 flex items-center justify-between px-10 z-40">
        <div class="text-lg font-semibold text-gray-900">
            {% block page_title %}Dashboard{% endblock %}
        </div>
        <div class="flex items-center space-x-4">
            <a href="{{ path('app_home_index') }}"
               class="px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-200
                      {{ app.request.attributes.get('_route') == 'app_home_index'
                         ? 'bg-indigo-600 text-white'
                         : 'bg-gray-100 text-gray-700 hover:bg-gray-200' }}">
                Home
            </a>
            <a href="{{ path('app_logout') }}"
               class="px-4 py-2 text-sm font-medium text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors duration-200">
                Logout
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="ml-64 mt-15 p-10">
        <div class="max-w-7xl mx-auto">
            {% block body %}{% endblock %}
        </div>
    </div>

    <!-- Mobile menu button -->
    <button type="button" class="md:hidden fixed bottom-4 right-4 bg-indigo-600 text-white p-3 rounded-full shadow-lg z-50" id="mobile-menu-button">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
        </svg>
    </button>

    <script>
        // Mobile menu toggle
        document.getElementById('mobile-menu-button').addEventListener('click', function() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('translate-x-0');
            sidebar.classList.toggle('-translate-x-full');
        });

        // Add active state to current route
        document.addEventListener('DOMContentLoaded', function() {
            const currentPath = window.location.pathname;
            const navLinks = document.querySelectorAll('.sidebar a');

            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('text-white', 'bg-indigo-600/10');
                    const indicator = link.querySelector('span:first-child');
                    if (indicator) {
                        indicator.classList.add('opacity-100');
                    }
                }
            });
        });
    </script>
</body>
</html>
